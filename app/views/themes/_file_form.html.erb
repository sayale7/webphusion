<%= form_tag upload_files_update_path(:the_path => @the_path, :theme => @theme.id), :remote => true do %>
	<% if false %><p><%= text_field_tag :file_name, @file_name, :id => 'dark' %></p><% end %>
	<%= text_area_tag 'file_edit', @content, :id => 'code' %>
	<p><%= submit_tag t('common.save') %></p>
<% end %>
<%= javascript '/codemirror/js/codemirror' %>
<style type="text/css"> 

.CodeMirror-line-numbers {
	width: 2.2em;
	color: #aaa;
	background-color: #eee;
	text-align: right;
	padding-right: .3em;
	font-size: 10pt;
	font-family: monospace;
	padding-top: .4em;
}
</style> 

<% if @mime_type.eql?('text/css') %>
<script type="text/javascript">
	var the_height = $(window).height() - 160;
	var the_height = the_height.toString() + 'px';
  CodeMirror.fromTextArea('code', {
    height: the_height,
    parserfile: "parsecss.js",
    stylesheet: "/codemirror/css/csscolors.css",
    path: "/codemirror/js/",
		textWrapping: true,
		lineNumbers: true
  });
</script>

<% else %>

<script type="text/javascript">
	var the_height = $(window).height() - 160;
	var the_height = the_height.toString() + 'px';
	CodeMirror.fromTextArea('code', {
		height: the_height,
    parserfile: ["tokenizejavascript.js", "parsejavascript.js"],
    stylesheet: "/codemirror/css/jscolors.css",
    path: "/codemirror/js/",
    autoMatchParens: true,
		textWrapping: true,
		lineNumbers: true
	});
</script>

<% end %>